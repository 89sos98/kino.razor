;(function(){var e="@",t=function(e,r){if(arguments.length==1)return n(e);var i;return typeof e=="function"?i=e:i=n(e),i.call(null,t.HtmlHelper,r)},n=function(e,t){var n={segments:[],segmentIndex:0,conditionOpeningBraceCount:0},r=s.parse(n,e),i=o.toFunctionContent(r);return new Function("Html","m",i)};t.HtmlHelper={escape:function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}};var r={String:0,Variable:1,ScriptBlock:2},i={VariableFirstChar:/^[\(_a-zA-Z]/,Variable:/^(?:(?:\()(?:new\s+)?[a-zA-Z0-9]+(?:\.|[-\+*\/^=<>?:]|[\[\(][^\]\)]*[\]\)]|[a-zA-Z0-9]+)*(?:\))|(?:new\s+)?[a-zA-Z0-9]+(?:\.|[\[\(][^\]\)]*[\]\)]|[a-zA-Z0-9]+)*)/,ConditionAndLoop:/^(?:if|for|while)\s*\(/,ElseCondition:/^[\s\r\n\t]*else(?:\s*{|[\s\t]+if\()?/},s={parse:function(t,n){var r=n.length;for(var s=0;s<r;s++){var o=n.substr(s,1);if(o==e){this._handleString(t,n,t.segmentIndex,s-t.segmentIndex);var u=n.substr(s+1,1);u===e?(this._handleSymbolEscape(t,null,t.segmentIndex),s=t.segmentIndex-1):u==="{"?(this._handleScriptBlock(t,n,s+1),s=t.segmentIndex-1):i.VariableFirstChar.test(u)&&(i.ConditionAndLoop.test(n.substr(s+1))?this._handleCondition(t,n,s+1):this._handleVariable(t,n,s+1),s=t.segmentIndex-1)}else o==="}"&&t.conditionOpeningBraceCount>0&&(this._handleCloseBrace(t,n,s),i.ElseCondition.test(n.substr(t.segmentIndex))&&this._handleCondition(t,n,s+1),s=t.segmentIndex-1)}return t.segmentIndex<r&&this._handleString(t,n,t.segmentIndex,r-t.segmentIndex),t.segments},_handleString:function(e,t,n,i){if(i==0)return;e.segments[e.segments.length]={segmentType:r.String,content:t.substr(n,i)}},_handleSymbolEscape:function(t,n,i){t.segmentIndex=i+2,t.segments[t.segments.length]={segmentType:r.String,content:e}},_handleVariable:function(e,t,n){var s=t.substr(n),o=i.Variable.exec(s)[0];e.segmentIndex=n+o.length,e.segments[e.segments.length]={segmentType:r.Variable,content:o}},_handleScriptBlock:function(e,t,n){var i=this._getScriptBlockLength(t,n);e.segmentIndex=n+i,e.segments[e.segments.length]={segmentType:r.ScriptBlock,content:t.substr(n+1,i-2)},e.conditionOpeningBraceCount++},_getScriptBlockLength:function(e,t){var n=0;for(var r=t;r<e.length;r++){var i=e.substr(r,1);if(i==="{")n++;else if(i==="}"){if(--n===0)return r-t+1;n--}}throw"no matches found }"},_handleCondition:function(e,t,n){var i=t.substr(n),s=i.indexOf("{");e.segments[e.segments.length]={segmentType:r.ScriptBlock,content:i.substr(0,s+1)},e.segmentIndex=n+s+1,e.conditionOpeningBraceCount++},_handleCloseBrace:function(e,t,n){this._handleString(e,t,e.segmentIndex,n-e.segmentIndex),e.segments[e.segments.length]={segmentType:r.ScriptBlock,content:t.substr(n,1)},e.segmentIndex=n+1,e.conditionOpeningBraceCount--}},o={escape:function(e){return e.replace(/\\/g,"\\\\").replace(/'/g,"\\'")},toFunctionContent:function(e){var t="var __c='';with(m||{}){";for(var n=0;n<e.length;n++)if(e[n].segmentType==r.String)t+="__c = __c+'"+this.escape(e[n].content)+"';";else if(e[n].segmentType==r.Variable){var i=e[n].content;t+="if(typeof "+i+" != 'undefined'){",t+="__c = __c+"+i+";}"}else e[n].segmentType==r.ScriptBlock&&(t+=e[n].content);return t+="};return __c;",t}};t.use=function(t){e=t},typeof module!="undefined"&&module.exports?module.exports=t:(this.kino=this.kino?this.kino:{},this.kino.razor=t)})()